################################################################################
# makefile for test util
################################################################################

MAKE_INCLUDE_PATH=mk.inc

# ------------------------------------------------------------------------------
# Compiler and BIT
# ------------------------------------------------------------------------------
CC=gcc
BIT = 64

# ------------------------------------------------------------------------------
# debugger
# ------------------------------------------------------------------------------
DBGOPT = -g

# ------------------------------------------------------------------------------
# sources
# ------------------------------------------------------------------------------
SOURCES = mqbase.c

# ------------------------------------------------------------------------------
# main source
# ------------------------------------------------------------------------------
MAIN = 

# ------------------------------------------------------------------------------
# BINARY
# ------------------------------------------------------------------------------
BINARY = 

# ------------------------------------------------------------------------------
# libraries dynamic & static
# ------------------------------------------------------------------------------
LIBRARY = libmqutil.so 

ARCHIVE  =  libmqutil.a

# ------------------------------------------------------------------------------
# rollout includes
# ------------------------------------------------------------------------------
ROLLOUT_INC = 

# ------------------------------------------------------------------------------
# general includes
# ------------------------------------------------------------------------------
include $(MAKE_INCLUDE_PATH)/general.modules.mk

# ------------------------------------------------------------------------------
# mqreason
# ------------------------------------------------------------------------------
MQRC = mqrc

$(TMP_PATH)/mqreason.tmp :
	$(MQRC) -R -f 0 -l 99999999999 | $(CUT) -b1-65 | $(GREP) -v "^$$" > $@

$(INCLUDE_PATH)/mqreason.h :  $(TMP_PATH)/mqreason.tmp 
	$(PERL) -e   \
	'foreach(<STDIN>) \
  {chomp; \
  s/^(\S+)\s+(\S+)\s+(\S+)\s*/#define $$3   $$1/;print "$$_\n"'} \
	 < $< >$@



cleanlocal :
	$(RM) include/mqreason.h

# ------------------------------------------------------------------------------
# tests
# ------------------------------------------------------------------------------
include $(MAKE_INCLUDE_PATH)/test.mk

